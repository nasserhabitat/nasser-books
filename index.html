<DOCUMENT filename="index.html">

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة ناصر ابن داوود</title>
    <style>
        /* أضف أنماط CSS هنا إذا لزم الأمر */
    </style>
</head>
<body>

    🤖 منصة متوافقة مع الذكاء الاصطناعي - آخر تحديث: <span id="last-update"></span>

    <div>
        مكتبة ناصر ابن داوود

        منصة المعرفة القرآنية المتوافقة مع الذكاء الاصطناعي

        📚 24 كتاب | 
        🌐 نسختان linguistically | 
        🤖 متوافق مع الذكاء الاصطناعي

        وصول الذكاء الاصطناعي:

        فهرس الكتب (JSON)
        واجهة الذكاء الاصطناعي
        محرك البحث

    </div>

    <!-- باقي الهيكل من الـ HTML الأصلي، مثل الأقسام للكتب الجديدة، الفلاتر، إلخ -->

    <div id="book-grid"></div>
    <div id="book-list" style="display: none;"></div>

    <!-- قسم البحث -->
    <div id="search-results-container" style="display: none;">
        <div id="search-info">
            تبحث عن: <span id="search-term-display"></span> | 
            عدد النتائج: <span id="search-results-count"></span>
        </div>
        <div id="search-results-content"></div>
        <div id="no-results" style="display: none;">
            لم يتم العثور على كتب تطابق بحثك. حاول استخدام مصطلحات أخرى.
        </div>
    </div>

    <!-- باقي الـ HTML -->

    <script>
        let allBooks = [
            {
              "id": "conscious-contemplation",
              "titles": {
                "ar": "نحو تدبر واعٍ",
                "en": "Towards Conscious Contemplation"
              },
              "description": {
                "ar": "كتاب يشرح منهجية التدبر العميق للقرآن الكريم وتطبيقاته العصرية",
                "en": "A practical guide to deep understanding and applying the Noble Quran in the modern era"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/conscious-contemplation/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=17AkqVDGa9GOoGEpCHmk1yfQ9t9uIgUV2",
                  "html": "https://drive.google.com/uc?export=download&id=1CjD4C5WZBg6Nl7JTHMdvrgMbHI1GRVem",
                  "pdf": "books/conscious-contemplation/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1rMSGwIltsrPSjT4RLoX8ds21MyB633i7",
                  "text": "books/conscious-contemplation/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1ZjCEi5V3dye2T0fwpAExfnM9haDKhnQF",
                  "archive_text": "https://archive.org/stream/20250529_20250529_2132/%D9%86%D8%AD%D9%88%20%D8%AA%D8%AF%D8%A8%D8%B1%D9%8D%20%D9%88%D8%A7%D8%B9%D9%8D%20%D8%AF%D9%84%D9%8A%D9%84%20%D8%B9%D9%85%D9%84%D9%8A%20%D9%84%D9%81%D9%87%D9%85%20%D9%88%D8%AA%D8%B7%D8%A8%D9%8A%D9%82%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%20%D8%A7%D9%84%D9%83%D8%B1%D9%8A%D9%85%20%D9%81%D9%8A%20%D8%A7%D9%84%D8%B9%D8%B5%D8%B1%20%D8%A7%D9%84%D8%AD%D8%AF%D9%8A%D8%AB_djvu.txt",
                  "archive_pdf": "https://dn720702.ca.archive.org/0/items/20250529_20250529_2132/%D9%86%D8%AD%D9%88%20%D8%AA%D8%AF%D8%A8%D8%B1%D9%8D%20%D9%88%D8%A7%D8%B9%D9%8D%20%D8%AF%D9%84%D9%8A%D9%84%20%D8%B9%D9%85%D9%84%D9%8A%20%D9%84%D9%81%D9%87%D9%85%20%D9%88%D8%AA%D8%B7%D8%A8%D9%8A%D9%82%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%20%D8%A7%D9%84%D9%83%D8%B1%D9%8A%D9%85%20%D9%81%D9%8A%20%D8%A7%D9%84%D8%B9%D8%B5%D8%B1%20%D8%A7%D9%84%D8%AD%D8%AF%D9%8A%D8%AB.pdf",
                  "cover": "books/conscious-contemplation/ar/cover-ar.png"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=18FP0NmPM1CHSCZs0UDLnLBGSrqfEJWlX",
                  "html": "https://drive.google.com/uc?export=download&id=11gaZUgs7DkUBe_8OABu1remHgaEfZmnn",
                  "pdf": "books/conscious-contemplation/en/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1yKPdEMoAMHXLmKlhaSVhy61tjWoVEVbv",
                  "text": "books/conscious-contemplation/en/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1sWN_QZ-Ovmam3g2Y-I_a1OXkV4wFiqYb",
                  "archive_text": "https://archive.org/stream/towards-conscious-contemplation-a-practical-guide-to-understanding-and-applying-/TOWARDS%20CONSCIOUS%20CONTEMPLATION%20%20%20A%20PRACTICAL%20GUIDE%20TO%20UNDERSTANDING%20AND%20APPLYING%20THE%20NOBLE%20QUR%27AN%20IN%20THE%20MODERN%20ERA_djvu.txt",
                  "archive_pdf": "https://ia800602.us.archive.org/9/items/towards-conscious-contemplation-a-practical-guide-to-understanding-and-applying-/TOWARDS%20CONSCIOUS%20CONTEMPLATION%20%20%20A%20PRACTICAL%20GUIDE%20TO%20UNDERSTANDING%20AND%20APPLYING%20THE%20NOBLE%20QUR%27AN%20IN%20THE%20MODERN%20ERA.pdf",
                  "cover": "books/conscious-contemplation/en/cover-en.png"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "quranic_studies",
                "pages_ar": 91,
                "pages_en": 126,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["تدبر القرآن", "فهم القرآن", "تطبيق القرآن", "منهجية التدبر", "القرآن في العصر الحديث", "نور العقل", "رقمنة المخطوطات القرآنية", "الرسم العثماني", "المخطوطات القرآنية الأصلية", "منهج حياة", "الفهم الواعي للقرآن", "آيات القرآن", "القرآن الكريم", "تدبر عملي", "ناصر ابن داوود"]
              }
            },
            {
              "id": "anwar-al-bayan",
              "titles": {
                "ar": "أنوار البيان في رسم المصحف العثماني: الكشف عن أسرار اللسان",
                "en": "Anwar Al-Bayan in the Drawing of the Ottoman Quran: Unveiling the Secrets of the Tongue"
              },
              "description": {
                "ar": "دراسة علمية متعمقة للرسم العثماني وأسراره اللغوية في فهم القرآن الكريم",
                "en": "A scientific study revealing the linguistic secrets of the Ottoman Quranic script"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/anwar-al-bayan/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=1VjEJEjjrJbM7glhR2lHEsqB1L94t2XCu",
                  "html": "https://drive.google.com/uc?export=download&id=1OuuQzbqrCW9blAvWc2AIpHdM9sl4bYUB",
                  "pdf": "books/anwar-al-bayan/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1OuuQzbqrCW9blAvWc2AIpHdM9sl4bYUB",
                  "text": "books/anwar-al-bayan/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1O0uafxgb-EXpmiOZaNnLEx73okvilKZl",
                  "archive_text": "https://archive.org/stream/20250529_20250529_2033/%D8%A3%D9%86%D9%88%D8%A7%D8%B1%20%D8%A7%D9%84%D8%A8%D9%8A%D8%A7%D9%86%20%D9%81%D9%8A%20%D8%B1%D8%B3%D9%85%20%D8%A7%D9%84%D9%85%D8%B5%D8%AD%D9%81%20%D8%A7%D9%84%D8%B9%D8%AB%D9%85%D8%A7%D9%86%D9%8A%20%D8%A7%D9%84%D9%83%D8%B4%D9%81%20%D8%B9%D9%86%20%D8%A3%D8%B3%D8%B1%D8%A7%D8%B1%20%D8%A7%D9%84%D9%84%D8%B3%D8%A7%D9%86_djvu.txt",
                  "archive_pdf": "https://dn721701.ca.archive.org/0/items/20250529_20250529_2033/%D8%A3%D9%86%D9%88%D8%A7%D8%B1%20%D8%A7%D9%84%D8%A8%D9%8A%D8%A7%D9%86%20%D9%81%D9%8A%20%D8%B1%D8%B3%D9%85%20%D8%A7%D9%84%D9%85%D8%B5%D8%AD%D9%81%20%D8%A7%D9%84%D8%B9%D8%AB%D9%85%D8%A7%D9%86%D9%8A%20%D8%A7%D9%84%D9%83%D8%B4%D9%81%20%D8%B9%D9%86%20%D8%A3%D8%B3%D8%B1%D8%A7%D8%B1%20%D8%A7%D9%84%D9%84%D8%B3%D8%A7%D9%86.pdf",
                  "cover": "books/anwar-al-bayan/ar/cover-ar.png"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=1TVOxURf1EI8Oq774aUANI7WRqbg5MbOi",
                  "html": "https://drive.google.com/uc?export=download&id=1s0x6gR0p7zfHuQIN7C8mpYT82NyHysEX",
                  "pdf": "books/anwar-al-bayan/en/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1kyDrHDpYAWA1G0KE8Ow5e5VIk-lbM6zZ",
                  "text": "books/anwar-al-bayan/en/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1vo44VX03M_ZR-ISriWgqAteOrvG8HMu2",
                  "archive_text": "https://archive.org/stream/anwar-al-bayan-in-the-drawing-of-the-ottoman-qur-an-revealing-the-secrets-of-the-tongue/ANWAR%20AL-BAYAN%20IN%20THE%20DRAWING%20OF%20THE%20OTTOMAN%20QUR%27AN%20%20%20REVEALING%20THE%20SECRETS%20OF%20THE%20TONGUE_djvu.txt",
                  "archive_pdf": "https://dn721503.ca.archive.org/0/items/anwar-al-bayan-in-the-drawing-of-the-ottoman-qur-an-revealing-the-secrets-of-the-tongue/ANWAR%20AL-BAYAN%20IN%20THE%20DRAWING%20OF%20THE%20OTTOMAN%20QUR%27AN%20%20%20REVEALING%20THE%20SECRETS%20OF%20THE%20TONGUE.pdf",
                  "cover": "books/anwar-al-bayan/en/cover-en.png"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "quranic_studies",
                "pages_ar": 161,
                "pages_en": 215,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["الرسم العثماني", "المصحف العثماني", "أسرار اللسان", "أنوار البيان", "تدبر القرآن", "المخطوطات الرقمية", "اللغة العربية", "علوم القرآن", "القرآن الكريم", "الفهم العميق", "الدراسات القرآنية", "التفسير", "الخط العربي", "الكتابة القرآنية"]
              }
            },
            {
              "id": "changing-the-concepts",
              "titles": {
                "ar": "تغيير المفاهيم",
                "en": "Changing the Concepts"
              },
              "description": {
                "ar": "دراسة تطبيقية لفقه اللسان القرآني وتحليل المصطلحات القرآنية",
                "en": "An applied study of the jurisprudence of the Quranic tongue and analysis of Quranic terminology"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/changing-the-concepts/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=1k2y2b8QCvcoBa-9Bn8qz7xPmSPN8P_oe",
                  "html": "https://drive.google.com/uc?export=download&id=1sOuXA8sA8a0vVU8betDkJvIZeNA6EjCB",
                  "pdf": "books/changing-the-concepts/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1xws8rEosYU6dbjPrI8wLxubBOCXMqiwZ",
                  "text": "books/changing-the-concepts/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=11JcMS0au6I2EbZtsZPPnNdPNcwSJN43M",
                  "archive_text": "https://archive.org/stream/20250529_20250529_2050/%D8%AA%D8%BA%D9%8A%D9%8A%D8%B1%20%D8%A7%D9%84%D9%85%D9%81%D8%A7%D9%87%D9%8A%D9%85%20%D9%84%D9%84%D9%85%D8%B5%D8%B7%D9%84%D8%AD%D8%A7%D8%AA%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%D9%8A%D8%A9%20%D9%83%D8%AA%D8%B7%D8%A8%D9%8A%D9%82%20%D9%84%D9%81%D9%82%D9%87%20%D8%A7%D9%84%D9%84%D8%B3%D8%A7%D9%86%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%D9%8A_djvu.txt",
                  "archive_pdf": "https://ia801709.us.archive.org/33/items/20250529_20250529_2050/%D8%AA%D8%BA%D9%8A%D9%8A%D8%B1%20%D8%A7%D9%84%D9%85%D9%81%D8%A7%D9%87%D9%8A%D9%85%20%D9%84%D9%84%D9%85%D8%B5%D8%B7%D9%84%D8%AD%D8%A7%D8%AA%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%D9%8A%D8%A9%20%D9%83%D8%AA%D8%B7%D8%A8%D9%8A%D9%82%20%D9%84%D9%81%D9%82%D9%87%20%D8%A7%D9%84%D9%84%D8%B3%D8%A7%D9%86%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%D9%8A.pdf",
                  "cover": "books/changing-the-concepts/ar/cover-ar.png"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=1f7w8f9jX1L6F3D5Z8V5F2E6P9B4Q3R7S",
                  "html": "https://drive.google.com/uc?export=download&id=1f7w8f9jX1L6F3D5Z8V5F2E6P9B4Q3R7S",
                  "pdf": "books/changing-the-concepts/en/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1f7w8f9jX1L6F3D5Z8V5F2E6P9B4Q3R7S",
                  "text": "books/changing-the-concepts/en/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1f7w8f9jX1L6F3D5Z8V5F2E6P9B4Q3R7S",
                  "archive_text": "https://archive.org/stream/changing-the-concepts-an-applied-study-of-the-jurisprudence-of-the-quranic-ton/CHANGING%20THE%20CONCEPTS%20-%20AN%20APPLIED%20STUDY%20OF%20THE%20JURISPRUDENCE%20OF%20THE%20QURANIC%20TONGUE%20AND%20ANALYSIS%20OF%20QURANIC%20TERMS_djvu.txt",
                  "archive_pdf": "https://ia801709.us.archive.org/33/items/changing-the-concepts-an-applied-study-of-the-jurisprudence-of-the-quranic-ton/CHANGING%20THE%20CONCEPTS%20-%20AN%20APPLIED%20STUDY%20OF%20THE%20JURISPRUDENCE%20OF%20THE%20QURANIC%20TONGUE%20AND%20ANALYSIS%20OF%20QURANIC%20TERMS.pdf",
                  "cover": "books/changing-the-concepts/en/cover-en.png"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "quranic_studies",
                "pages_ar": 157,
                "pages_en": 206,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["تغيير المفاهيم", "المصطلحات القرآنية", "فقه اللسان القرآني", "تحليل القرآن", "الدراسات القرآنية", "القرآن الكريم", "الفهم العميق", "الرسم العثماني", "الكلمات القرآنية", "التفسير", "اللغة العربية", "علوم القرآن"]
              }
            },
            {
              "id": "prostration-and-glorification-in-the-qur’an",
              "titles": {
                "ar": "السجود والتسبيح في القرآن: من التنزيه القلبي إلى الخضوع العملي",
                "en": "Prostration and Glorification in the Qur’an: From Heartfelt Purification to Practical Submission"
              },
              "description": {
                "ar": "من التنزيه القلبي إلى الخضوع العملي",
                "en": "FROM HEARTFELT PURIFICATION TO PRACTICAL SUBMISSION"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/prostration-and-glorification-in-the-qur’an/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=1_J5BwdF5xgKoXJM7WzRFxxv0NXWlrDLV",
                  "html": "https://drive.google.com/uc?export=download&id=1DV-6QP-LbkLlIbEKmhTV54iSUzcdGYHe",
                  "pdf": "books/prostration-and-glorification-in-the-qur’an/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1SMFzP3qbsclWGaYJH_idtBPC2HOlZBuB",
                  "text": "books/prostration-and-glorification-in-the-qur’an/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1Ic6Us2cmPScuJPOYUzShq-GERNdXO-gx",
                  "archive_text": null,
                  "archive_pdf": null,
                  "cover": "books/prostration-and-glorification-in-the-qur’an/ar/cover-ar.png"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=1N8d5YlzSU9nLBnUkekLefTlskisPa1Qo",
                  "html": "https://drive.google.com/uc?export=download&id=1sDxqVx_D8NvO1q0CGrQs25_-CxW_Wsi0",
                  "pdf": "books/prostration-and-glorification-in-the-qur’an/en/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1LgKEAcmmtIql5jFdRF4kZc0Xow-dPWjd",
                  "text": "books/prostration-and-glorification-in-the-qur’an/en/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1-4pwIbiwFemrRSoMqGDGCgmPtEkiTlXD",
                  "archive_text": null,
                  "archive_pdf": null,
                  "cover": "books/prostration-and-glorification-in-the-qur’an/en/cover-en.png"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "faith_studies",
                "pages_ar": 131,
                "pages_en": 189,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["السجود", "التسبيح", "القرآن الكريم", "التنزيه القلبي", "الخضوع العملي", "منهج حياة", "الحمد المحمدي", "فقه اللسان القرآني", "العبودية"]
              }
            },
            {
              "id": "christ-and-mary-in-the-qur’an",
              "titles": {
                "ar": "المسيح ومريم في القرآن: من الرمز الباطني إلى النموذج الإنساني",
                "en": "Christ and Mary in the Qur’an: From the Esoteric Symbol to the Human Model"
              },
              "description": {
                "ar": "من الرمز الباطني إلى النموذج الإنساني",
                "en": "From the esoteric symbol to the human model"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/christ-and-mary-in-the-qur’an/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=1f-RnPsgoj2SWgpUKGqXfXXloZaQPfPo0",
                  "html": "https://drive.google.com/uc?export=download&id=126o_Pn8Z5HEUQl3OVy4Tjo0dGcPEp4Ni",
                  "pdf": "books/christ-and-mary-in-the-qur’an/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1tg6hiu3rJs1AClr-rfT732y2zN6-cHmJ",
                  "text": "books/christ-and-mary-in-the-qur’an/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=12xfvS3lrXzU5EPijQGWWThmxoRPOdMDZ",
                  "archive_text": null,
                  "archive_pdf": null,
                  "cover": "books/christ-and-mary-in-the-qur’an/ar/cover-ar.png"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=1PU2hPmTCn6GnFJzZ0sxHhdSgYrfg9jC4",
                  "html": "https://drive.google.com/uc?export=download&id=1tNy2hUQvoEDFLaj9kOm-mGzuzp1Q_Uzt",
                  "pdf": "books/christ-and-mary-in-the-qur’an/en/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=16r8XSPcI5ShgIvX_7ReHJ7cmFscJ6v_t",
                  "text": "books/christ-and-mary-in-the-qur’an/en/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1YtX1Q9rjzo-qL6UXCDeklHUcjuKe9m6w",
                  "archive_text": null,
                  "archive_pdf": null,
                  "cover": "books/christ-and-mary-in-the-qur’an/en/cover-en.png"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "faith_studies",
                "pages_ar": 69,
                "pages_en": 94,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["المسيح", "مريم", "القرآن", "التدبر الباطني", "الرمز الباطني", "النموذج الإنساني", "نماذج الوعي", "التفسير الرمزي", "فقه اللسان القرآني", "نظام المثاني", "الكلمة", "برنامج إحيائي", "الوعي الجديد", "التحرر الفكري", "أسماء الله الحسنى", "الرفع الإلهي", "الولادة العذرية", "مريم الثائرة", "تحليل نفسي لمريم", "المحراب", "النصارى في القرآن", "قراءة علمية معاصرة"]
              }
            },
            {
              "id": "names-in-the-holy",
              "titles": {
                "ar": "الأسماء الحسنى الوظيفية في القرآن الكريم: دراسة توقيفية تحليلية لدلالات التدبير الإلهي",
                "en": "The Functional Beautiful Names in the Holy Quran: An Analytical Discretionary Study of the Connotations of Divine Management"
              },
              "description": {
                "ar": "دراسة توقيفية تحليلية لدلالات التدبير الإلهي من خلال الأسماء الحسنى",
                "en": "An analytical discretionary study of the connotations of divine management through the Beautiful Names"
              },
              "cover_image": "https://nasserhabitat.github.io/nasser-books/books/names-in-the-holy/ar/cover-ar.png",
              "links": {
                "ar": {
                  "docx": "https://drive.google.com/uc?export=download&id=1bP9LhKW_KUmh8pD5L2DROKMJSHEsU1Bz",
                  "pdf": "books/names-in-the-holy/ar/content.pdf",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1hX1pyjB-AMZipBO7goySnXLAO1Yb5j0o",
                  "html": "https://drive.google.com/uc?export=download&id=1nOdYzAUMz7HR0NeHrOfACEMwRGHu87Uc",
                  "text": "books/names-in-the-holy/ar/content.txt",
                  "text_external": "https://drive.google.com/uc?export=download&id=1yzexcZFd9MKtcyR_a-6EpFkjsmp2RPJD",
                  "cover": "books/names-in-the-holy/ar/cover-ar.png",
                  "archive_text": "https://archive.org/stream/20250529_20250529_2125/%D9%83%D8%AA%D8%A7%D8%A8%20%D8%A7%D9%84%D8%A3%D8%B3%D9%85%D8%A7%D8%A1%20%D8%A7%D9%84%D8%AD%D8%B3%D9%86%D9%89%20%D8%A7%D9%84%D9%88%D8%B8%D9%8A%D9%81%D9%8A%D8%A9%20%D9%81%D9%8A%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%20%D8%A7%D9%84%D9%83%D8%B1%D9%8A%D9%85-%20%D8%AF%D8%B1%D8%A7%D8%B3%D8%A9%20%D8%AA%D9%88%D9%82%D9%8A%D9%81%D9%8A%D8%A9%20%D8%AA%D8%AD%D9%84%D9%8A%D9%84%D9%8A%D8%A9%20%D9%84%D8%AF%D9%84%D8%A7%D9%84%D8%A7%D8%AA%20%D8%A7%D9%84%D8%AA%D8%AF%D8%A8%D9%8A%D8%B1%20%D8%A7%D9%84%D8%A5%D9%84%D9%87%D9%8A%E2%80%83_djvu.txt",
                  "archive_pdf": "https://dn721500.ca.archive.org/0/items/20250529_20250529_2125/%D9%83%D8%AA%D8%A7%D8%A8%20%D8%A7%D9%84%D8%A3%D8%B3%D9%85%D8%A7%D8%A1%20%D8%A7%D9%84%D8%AD%D8%B3%D9%86%D9%89%20%D8%A7%D9%84%D9%88%D8%B8%D9%8A%D9%81%D9%8A%D8%A9%20%D9%81%D9%8A%20%D8%A7%D9%84%D9%82%D8%B1%D8%A2%D9%86%20%D8%A7%D9%84%D9%83%D8%B1%D9%8A%D9%85-%20%D8%AF%D8%B1%D8%A7%D8%B3%D8%A9%20%D8%AA%D9%88%D9%82%D9%8A%D9%81%D9%8A%D8%A9%20%D8%AA%D8%AD%D9%84%D9%8A%D9%84%D9%8A%D8%A9%20%D9%84%D8%AF%D9%84%D8%A7%D9%84%D8%A7%D8%AA%20%D8%A7%D9%84%D8%AA%D8%AF%D8%A8%D9%8A%D8%B1%20%D8%A7%D9%84%D8%A5%D9%84%D9%87%D9%8A%E2%80%83.pdf"
                },
                "en": {
                  "docx": "https://drive.google.com/uc?export=download&id=1wm69kiHQygYC8_hecev39pKfNFdMnuiy",
                  "pdf_external": "https://drive.google.com/uc?export=download&id=1UiOYSda3JvMBzHqoX9B3Tg5dzU56A9nu",
                  "html": "https://drive.google.com/uc?export=download&id=12cV5qFDaZ-0SzQGInIn9cP9vOONVzY9-",
                  "text_external": "https://drive.google.com/uc?export=download&id=1MYa0vWDb1vBI5R7Ojq1bloO45txsVkdE",
                  "pdf": "books/names-in-the-holy/en/content.pdf",
                  "text": "books/names-in-the-holy/en/content.txt",
                  "cover": "books/names-in-the-holy/en/cover-en.png",
                  "archive_text": "https://archive.org/stream/the-most-beautiful-functional-names-in-the-holy-qur-an-an-analytical-endowment-s/THE%20MOST%20BEAUTIFUL%20FUNCTIONAL%20NAMES%20IN%20THE%20HOLY%20QUR%27AN%20-%20%20AN%20ANALYTICAL%20ENDOWMENT%20STUDY%20OF%20THE%20IMPLICATIONS%20OF%20DIVINE%20MANAGEMENT_djvu.txt",
                  "archive_pdf": "https://dn721208.ca.archive.org/0/items/the-most-beautiful-functional-names-in-the-holy-qur-an-an-analytical-endowment-s/THE%20MOST%20BEAUTIFUL%20FUNCTIONAL%20NAMES%20IN%20THE%20HOLY%20QUR%27AN%20-%20%20AN%20ANALYTICAL%20ENDOWMENT%20STUDY%20OF%20THE%20IMPLICATIONS%20OF%20DIVINE%20MANAGEMENT.pdf"
                }
              },
              "metadata": {
                "author": "ناصر ابن داوود",
                "category": "faith_studies",
                "pages_ar": 193,
                "pages_en": 248,
                "language_ar": "arabic",
                "language_en": "english",
                "ai_accessible": true,
                "structured_data": true,
                "topics": ["الأسماء الحسنى", "الأسماء الحسنى الوظيفية", "التدبير الإلهي", "القرآن الكريم", "دراسة توقيفية", "دلالات الأسماء الحسنى", "الإحصاء", "فهم سنن الكون", "اليقين", "الطمأنينة", "حل المشكلات", "الدعاء", "التوكل", "تطبيق الأسماء الحسنى", "المعرفة بالله", "أسرار الأسماء", "العلاقة بالله", "التأمل في القرآن"]
              }
            }
            // Add the rest of the books from the full JSON if available; for this response, using the provided ones.
        ];

        let bookContent = {};
        const formatsMap = {
            'docx': 'DOCX',
            'html': 'HTML',
            'pdf': 'PDF',
            'text': 'TEXT',
            'pdf_external': 'External PDF',
            'text_external': 'External TEXT',
            'archive_text': 'Archive Text',
            'archive_pdf': 'Archive PDF'
        };
        const langMap = {
            'ar': {
                'pdf_label': 'تحميل PDF',
                'read_more_label': 'روابط التحميل',
                'formats_title': 'روابط التحميل',
                'no_desc': 'لا يوجد وصف متاح.',
                'more_link_label': 'قراءة المزيد',
                'read_direct_label': 'قراءة مباشرة'
            },
            'en': {
                'pdf_label': 'Download PDF',
                'read_more_label': 'Download Links',
                'formats_title': 'Download Links',
                'no_desc': 'No description available.',
                'more_link_label': 'Read More',
                'read_direct_label': 'Read Directly'
            }
        };

        function getLang() {
            return document.documentElement.lang || 'ar';
        }

        function updateLastUpdateTime() {
            const lastUpdateSpan = document.getElementById('last-update');
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            lastUpdateSpan.textContent = now.toLocaleDateString('ar-EG', options);
        }

        function generateDownloadLinks(book, lang) {
            let linksHtml = '';
            const links = book.links[lang];
            if (links) {
                linksHtml += `<h3>${langMap[lang].formats_title}</h3>`;
                linksHtml += '<ul>';
                for (const key in links) {
                    if (links.hasOwnProperty(key) && formatsMap[key] && key !== 'cover') {
                        linksHtml += `<li><a href="${links[key]}" target="_blank">${formatsMap[key] || key.toUpperCase()}</a></li>`;
                    }
                }
                linksHtml += '</ul>';
            }
            return linksHtml;
        }

        function createBookCard(book, viewType = 'grid') {
            const lang = getLang();
            const card = document.createElement('div');
            card.className = 'book-card';
            card.setAttribute('data-category', book.metadata.category);
            const aiAccess = {
                structured_data: book.metadata.structured_data,
                api_accessible: book.metadata.ai_accessible,
                content_analysis: true,
                formats: ["html", "pdf", "txt"]
            };
            card.setAttribute('data-ai-access', JSON.stringify(aiAccess));
            card.setAttribute('data-id', book.id);

            const bookTitle = book.titles[lang] || book.titles.ar;
            const bookCover = book.links[lang]?.cover || book.cover_image;
            const bookDesc = book.description[lang] || book.description.ar || langMap[lang].no_desc;
            const bookPages = book.metadata[`pages_${lang}`] || book.metadata.pages_ar || 'غير محدد';
            const bookAuthor = book.metadata.author || 'ناصر ابن داوود';

            const hasEnglishVersion = !!book.titles.en && !!book.links.en;
            const enBadgeHtml = hasEnglishVersion ? '<span class="en-badge">EN</span>' : '';
            let englishVersionHtml = '';
            if (hasEnglishVersion) {
                englishVersionHtml = `
                    <button class="english-btn">English Version</button>
                    <p>Available in English</p>
                `;
            }

            // No page link in new data, so omit
            const pageLinkHtml = '';

            card.innerHTML = `
                <div class="book-cover">
                    ${enBadgeHtml}
                    <img src="${bookCover}" alt="${bookTitle}">
                    <span class="ai-badge">AI Ready</span>
                </div>
                <div class="book-info">
                    <h2>${bookTitle}</h2>
                    <p class="author-pages">${bookAuthor} | ${bookPages} صفحة</p>
                    <p class="description">${bookDesc}</p>
                    <div class="ai-formats">
                        ${aiAccess.formats.map(format => `<span>${format.toUpperCase()}</span>`).join('')}
                    </div>
                    ${generateDownloadLinks(book, lang)}
                    <button class="read-direct-btn">${langMap[lang].read_direct_label}</button>
                    ${englishVersionHtml}
                    ${pageLinkHtml}
                </div>
            `;

            const readBtn = card.querySelector('.read-direct-btn');
            if (readBtn) {
                readBtn.addEventListener('click', () => openReader(book.id, lang));
            }

            return card;
        }

        function loadBooks() {
            const bookGrid = document.getElementById('book-grid');
            const bookList = document.getElementById('book-list');

            bookGrid.innerHTML = '';
            bookList.innerHTML = '';

            allBooks.forEach(book => {
                const gridCard = createBookCard(book, 'grid');
                const listCard = createBookCard(book, 'list');

                bookGrid.appendChild(gridCard);
                bookList.appendChild(listCard);
            });
        }

        async function preloadBookContents() {
            const promises = allBooks.map(async (book) => {
                if (book.links.ar && book.links.ar.text) {
                    try {
                        const response = await fetch(book.links.ar.text);
                        const content = await response.text();
                        bookContent[book.id] = content;
                    } catch (error) {
                        console.error(`Failed to load content for ${book.titles.ar}:`, error);
                    }
                }
            });
            await Promise.all(promises);
        }

        // باقي الدوال مثل searchBooks, setupSearch, setupFilterButtons, applyFilters, setupAdvancedFilters, setupViewOptions, openReader

        // على سبيل المثال
        function searchBooks(searchTerm) {
            // الكود كما في الأصل
        }

        // ... (أكمل الكود الـ JS الكامل كما في الإصلاح السابق، مع التعديلات اللازمة)

        document.addEventListener('DOMContentLoaded', async function() {
            updateLastUpdateTime();
            loadBooks();
            await preloadBookContents();
            // setup functions...
            setInterval(updateLastUpdateTime, 3600000);
        });
    </script>

</body>
</html>

</DOCUMENT>
