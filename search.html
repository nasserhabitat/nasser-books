<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø­Ø« Ù…ØªØ®ØµØµ - Ù…ÙƒØªØ¨Ø© Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯</title>
    <style>
        :root {
            --primary-color: #1a5276;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            border-radius: 0 0 20px 20px;
            margin-bottom: 2rem;
        }
        
        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .search-tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 2rem;
        }
        
        .search-tab {
            flex: 1;
            padding: 12px 20px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .search-tab.active {
            background: var(--primary-color);
            color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e1e8ed;
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(26, 82, 118, 0.1);
        }
        
        .search-btn {
            padding: 15px 30px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .search-btn:hover {
            background: #c0392b;
            transform: translateY(-2px);
        }
        
        .language-toggle {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
            gap: 10px;
        }
        
        .lang-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            color: white;
        }
        
        .gcse-search {
            width: 100%;
        }
        
        .info-box {
            background: #e8f4fd;
            padding: 1rem;
            border-radius: 10px;
            margin: 1rem 0;
            border-right: 4px solid var(--primary-color);
        }
        
        .schema-types {
            background: #f0f7ff;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
        }
        
        .schema-types-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .schema-type {
            background: var(--primary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .book-card {
            background: white;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid #e1e8ed;
        }
        
        .book-title {
            color: #2c5f8a;
            margin-bottom: 0.5rem;
        }
        
        .book-description {
            color: #555;
            margin-bottom: 0.5rem;
        }
        
        .book-meta {
            color: #777;
            font-size: 0.9rem;
            margin: 10px 0;
        }
        
        .book-link {
            display: inline-block;
            padding: 10px 20px;
            background: var(--secondary-color);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .book-link:hover {
            background: var(--primary-color);
        }
        
        .search-highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .language-badge {
            display: inline-block;
            padding: 2px 8px;
            background: #e74c3c;
            color: white;
            border-radius: 10px;
            font-size: 0.7rem;
            margin-left: 5px;
            vertical-align: middle;
        }
        
        .topics-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
        }
        
        .topic-tag {
            background: #e8f4fd;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            border: 1px solid #b3d9ff;
        }
        
        .match-line {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border-right: 3px solid var(--accent-color);
            margin: 0.5rem 0;
        }
        
        .line-number {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 0.3rem;
        }
        
        .context-line {
            margin: 0.2rem 0;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
        }
        
        .context-line.match {
            background: #fff3cd;
        }
        
        @media (max-width: 768px) {
            .search-box {
                flex-direction: column;
            }
            
            .search-tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ” Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªØ®ØµØµ</h1>
            <p>Ù…ÙƒØªØ¨Ø© Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯ - Ø¨Ø­Ø« Ù…ØªÙ‚Ø¯Ù… ÙÙŠ Ø§Ù„Ù„ØºØªÙŠÙ† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</p>
        </div>
    </header>

    <div class="container">
        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¨Ø­Ø« -->
        <div class="search-tabs">
            <div class="search-tab active" data-tab="google-search">Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ Ø§Ù„Ù…ØªØ®ØµØµ</div>
            <div class="search-tab" data-tab="local-search">Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ù„ÙŠ</div>
            <div class="search-tab" data-tab="all-books">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨</div>
        </div>

        <!-- Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ Ø§Ù„Ù…ØªØ®ØµØµ -->
        <section class="search-section tab-content active" id="google-search">
            <h2>Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ Ø§Ù„Ù…ØªØ®ØµØµ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Schema.org</h2>
            <p>Ø§Ø¨Ø­Ø« ÙÙŠ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ù…Ø¹ Ù†ØªØ§Ø¦Ø¬ Ù…Ø®ØµØµØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù†ÙˆØ§Ø¹ Schema.org</p>
            
            <div class="info-box">
                <strong>ğŸ’¡ Ù…Ø¹Ù„ÙˆÙ…Ø©:</strong> Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­Ø±Ùƒ Ù…Ø®ØµØµ Ù„Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙƒØªØ¨ ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙÙ‚Ø·
                <br>
                <strong>ğŸ”§ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø±Ùƒ:</strong> <span id="search-engine-status">Ù…ÙØ¹Ù„ - Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</span>
            </div>

            <!-- Ù…Ø­Ø±Ùƒ Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ Ø§Ù„Ù…Ø®ØµØµ Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø³Ù†Ø© -->
            <div class="search-container">
                <script async src="https://cse.google.com/cse.js?cx=87a2ea74c56054f92">
                </script>
                <div class="gcse-searchbox" data-resultsUrl="https://nasserhabitat.github.io/nasser-books/search-results.html"></div>
                <div class="gcse-searchresults" data-queryParameterName="search" 
                     data-enableImageSearch="false" 
                     data-enableOrderBy="true"
                     data-autoSearchOnLoad="false"
                     data-disableWebSearch="true"
                     data-enableHistory="true"
                     data-refinementStyle="link">
                </div>
            </div>

            <!-- ØµÙØ­Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ù†ÙØµÙ„Ø© -->
            <div style="margin-top: 1rem; text-align: center;">
                <a href="search-results.html" style="color: var(--primary-color); text-decoration: none;">
                    ğŸ“„ Ø¹Ø±Ø¶ ØµÙØ­Ø© Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ù†ÙØµÙ„Ø©
                </a>
            </div>

            <!-- Ø¨Ø­Ø« ÙŠØ¯ÙˆÙŠ Ø¯Ù‚ÙŠÙ‚ -->
            <div style="margin-top: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 10px;">
                <h3>Ø¨Ø­Ø« ÙŠØ¯ÙˆÙŠ Ø¯Ù‚ÙŠÙ‚</h3>
                <p>Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† Ù…ØµØ·Ù„Ø­Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©:</p>
                <div class="search-box">
                    <input type="text" id="exactQuery" class="search-input" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ØµØ·Ù„Ø­ Ø¨Ø¯Ù‚Ø©...">
                    <button class="search-btn" onclick="performExactSearch()">
                        Ø¨Ø­Ø« Ø¯Ù‚ÙŠÙ‚
                    </button>
                </div>
            </div>

            <!-- Ø£Ù†ÙˆØ§Ø¹ Schema.org -->
            <div class="schema-types">
                <h3>Ø£Ù†ÙˆØ§Ø¹ Schema.org Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©:</h3>
                <div class="schema-types-list">
                    <span class="schema-type">Book</span>
                    <span class="schema-type">Article</span>
                    <span class="schema-type">ScholarlyArticle</span>
                    <span class="schema-type">CreativeWork</span>
                    <span class="schema-type">CollectionPage</span>
                    <span class="schema-type">WebPage</span>
                    <span class="schema-type">PublicationIssue</span>
                    <span class="schema-type">Chapter</span>
                    <span class="schema-type">Review</span>
                    <span class="schema-type">Person</span>
                </div>
            </div>
        </section>

        <!-- Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ù„ÙŠ -->
        <section class="search-section tab-content" id="local-search">
            <h2>Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ù„ÙŠ ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©</h2>
            <p>Ø§Ø¨Ø­Ø« ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø¯Ù…Ø¬ - ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</p>
            
            <!-- ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© -->
            <div class="language-toggle">
                <button class="lang-btn active" data-lang="both">Ø§Ù„Ù„ØºØªØ§Ù† Ù…Ø¹Ù‹Ø§</button>
                <button class="lang-btn" data-lang="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·</button>
                <button class="lang-btn" data-lang="en">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙÙ‚Ø·</button>
            </div>
            
            <div class="search-box">
                <input type="text" id="localSearch" class="search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆØ§Ù„Ù…Ø­ØªÙˆÙ‰ ÙˆØ§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©...">
                <button class="search-btn" onclick="performLocalSearch()">
                    Ø¨Ø­Ø« Ù…Ø­Ù„ÙŠ
                </button>
            </div>
            
            <div id="localResults"></div>
        </section>

        <!-- Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ -->
        <section class="search-section tab-content" id="all-books">
            <h2>Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…ØªØ§Ø­Ø©</h2>
            <p>Ø§Ø³ØªØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ ÙÙŠ Ø§Ù„Ù…ÙƒØªØ¨Ø©</p>
            
            <!-- ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ù„Ù„Ø¹Ø±Ø¶ -->
            <div class="language-toggle">
                <button class="lang-btn active" data-lang-display="ar">Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
                <button class="lang-btn" data-lang-display="en">Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</button>
            </div>
            
            <div id="allBooksList"></div>
        </section>
    </div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ Ù…Ø¹ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© ÙÙ‚Ø·
        const booksData = [
            {
                "id": "conscious-contemplation",
                "titles": {
                    "ar": "Ù†Ø­Ùˆ ØªØ¯Ø¨Ø± ÙˆØ§Ø¹Ù",
                    "en": "Towards Conscious Contemplation"
                },
                "description": {
                    "ar": "ÙƒØªØ§Ø¨ ÙŠØ´Ø±Ø­ Ù…Ù†Ù‡Ø¬ÙŠØ© Ø§Ù„ØªØ¯Ø¨Ø± Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ù„Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… ÙˆØªØ·Ø¨ÙŠÙ‚Ø§ØªÙ‡ Ø§Ù„Ø¹ØµØ±ÙŠØ©",
                    "en": "A practical guide to deep understanding and applying the Noble Quran in the modern era"
                },
                "cover_image": "books/conscious-contemplation/ar/cover-ar.png",
                "links": {
                    "ar": {
                        "text": "books/conscious-contemplation/ar/content.txt",
                        "cover": "books/conscious-contemplation/ar/cover-ar.png"
                    },
                    "en": {
                        "text": "books/conscious-contemplation/en/content.txt",
                        "cover": "books/conscious-contemplation/en/cover-en.png"
                    }
                },
                "metadata": {
                    "author": "Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯",
                    "category": "quranic_studies",
                    "pages_ar": 91,
                    "pages_en": 126,
                    "language_ar": "arabic",
                    "language_en": "english",
                    "ai_accessible": true,
                    "structured_data": true,
                    "topics": ["ØªØ¯Ø¨Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†", "ÙÙ‡Ù… Ø§Ù„Ù‚Ø±Ø¢Ù†", "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù†", "Ù…Ù†Ù‡Ø¬ÙŠØ© Ø§Ù„ØªØ¯Ø¨Ø±", "Ø§Ù„Ù‚Ø±Ø¢Ù† ÙÙŠ Ø§Ù„Ø¹ØµØ± Ø§Ù„Ø­Ø¯ÙŠØ«"],
                    "topics_en": ["Contemplating the Qur'an", "Understanding the Qur'an", "Applying the Qur'an", "Methodology of Contemplation", "The Qur'an in the Modern Age"]
                }
            },
            {
                "id": "anwar-al-bayan",
                "titles": {
                    "ar": "Ø£Ù†ÙˆØ§Ø± Ø§Ù„Ø¨ÙŠØ§Ù† ÙÙŠ Ø±Ø³Ù… Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ: Ø§Ù„ÙƒØ´Ù Ø¹Ù† Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù„Ø³Ø§Ù†",
                    "en": "Anwar Al-Bayan in the Drawing of the Ottoman Quran: Unveiling the Secrets of the Tongue"
                },
                "description": {
                    "ar": "Ø¯Ø±Ø§Ø³Ø© Ø¹Ù„Ù…ÙŠØ© Ù…ØªØ¹Ù…Ù‚Ø© Ù„Ù„Ø±Ø³Ù… Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ ÙˆØ£Ø³Ø±Ø§Ø±Ù‡ Ø§Ù„Ù„ØºÙˆÙŠØ© ÙÙŠ ÙÙ‡Ù… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…",
                    "en": "A scientific study revealing the linguistic secrets of the Ottoman Quranic script"
                },
                "cover_image": "books/anwar-al-bayan/ar/cover-ar.png",
                "links": {
                    "ar": {
                        "text": "books/anwar-al-bayan/ar/content.txt",
                        "cover": "books/anwar-al-bayan/ar/cover-ar.png"
                    },
                    "en": {
                        "text": "books/anwar-al-bayan/en/content.txt",
                        "cover": "books/anwar-al-bayan/en/cover-en.png"
                    }
                },
                "metadata": {
                    "author": "Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯",
                    "category": "quranic_studies",
                    "pages_ar": 161,
                    "pages_en": 215,
                    "language_ar": "arabic",
                    "language_en": "english",
                    "ai_accessible": true,
                    "structured_data": true,
                    "topics": ["Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ", "Ø§Ù„Ù…ØµØ­Ù Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ", "Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ù„Ø³Ø§Ù†", "Ø£Ù†ÙˆØ§Ø± Ø§Ù„Ø¨ÙŠØ§Ù†", "ØªØ¯Ø¨Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†"],
                    "topics_en": ["Uthmanic Script", "Qur'anic Orthography", "Qur'an", "Holy Quran", "Digital Manuscripts"]
                }
            },
            {
                "id": "changing-the-concepts",
                "titles": {
                    "ar": "ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ…",
                    "en": "Changing the Concepts"
                },
                "description": {
                    "ar": "Ø¯Ø±Ø§Ø³Ø© ØªØ·Ø¨ÙŠÙ‚ÙŠØ© Ù„ÙÙ‚Ù‡ Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©",
                    "en": "An applied study of the jurisprudence of the Quranic tongue and analysis of Quranic terminology"
                },
                "cover_image": "books/changing-the-concepts/ar/cover-ar.png",
                "links": {
                    "ar": {
                        "text": "books/changing-the-concepts/ar/content.txt",
                        "cover": "books/changing-the-concepts/ar/cover-ar.png"
                    },
                    "en": {
                        "text": "books/changing-the-concepts/en/content.txt",
                        "cover": "books/changing-the-concepts/en/cover-en.png"
                    }
                },
                "metadata": {
                    "author": "Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯",
                    "category": "quranic_studies",
                    "pages_ar": 569,
                    "pages_en": 829,
                    "language_ar": "arabic",
                    "language_en": "english",
                    "ai_accessible": true,
                    "structured_data": true,
                    "topics": ["ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØ§Ù‡ÙŠÙ…", "Ø§Ù„Ù…ØµØ·Ù„Ø­Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©", "ÙÙ‚Ù‡ Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ", "Ø§Ù„ØªØ¯Ø¨Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ", "Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ© Ø§Ù„Ø£ØµÙ„ÙŠØ©"],
                    "topics_en": ["Changing Concepts", "Quranic Terminology", "Jurisprudence of the Qur'anic Tongue", "Quranic Contemplation", "Original Qur'anic Manuscripts"]
                }
            },
            {
                "id": "contemplation-in-the-mirror",
                "titles": {
                    "ar": "Ø§Ù„ØªØ¯Ø¨Ø± ÙÙŠ Ù…Ø±Ø¢Ø© Ø§Ù„Ø±Ø³ÙˆÙ…",
                    "en": "Contemplation in the Mirror of Drawings"
                },
                "description": {
                    "ar": "ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ù…Ø®Ø·ÙˆØ·Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙÙŠ ØªØ¯Ø¨Ø± Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…",
                    "en": "Practical applications of digital manuscripts in the contemplation of the Quran"
                },
                "cover_image": "books/contemplation-in-the-mirror/ar/cover-ar.png",
                "links": {
                    "ar": {
                        "text": "books/contemplation-in-the-mirror/ar/content.txt",
                        "cover": "books/contemplation-in-the-mirror/ar/cover-ar.png"
                    },
                    "en": {
                        "text": "books/contemplation-in-the-mirror/en/content.txt",
                        "cover": "books/contemplation-in-the-mirror/en/cover-en.png"
                    }
                },
                "metadata": {
                    "author": "Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯",
                    "category": "quranic_studies",
                    "pages_ar": 251,
                    "pages_en": 254,
                    "language_ar": "arabic",
                    "language_en": "english",
                    "ai_accessible": true,
                    "structured_data": true,
                    "topics": ["Ø§Ù„ØªØ¯Ø¨Ø± ÙÙŠ Ù…Ø±Ø¢Ø© Ø§Ù„Ø±Ø³ÙˆÙ…", "Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©", "ØªØ¯Ø¨Ø± Ø§Ù„Ù‚Ø±Ø¢Ù†", "Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¹Ø«Ù…Ø§Ù†ÙŠ", "ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù…Ù„ÙŠØ© Ù„Ù„Ù‚Ø±Ø¢Ù†"],
                    "topics_en": ["Contemplation in the Mirror of Drawings", "Digital Manuscripts", "Contemplation of the Qur'an", "Ottoman Script", "Practical Applications of the Qur'an"]
                }
            },
            {
                "id": "the-jurisprudence",
                "titles": {
                    "ar": "ÙÙ‚Ù‡ Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ",
                    "en": "The Jurisprudence of the Quranic Tongue"
                },
                "description": {
                    "ar": "Ø¯Ø±Ø§Ø³Ø© Ù…Ù†Ù‡Ø¬ÙŠØ© Ù„ÙÙ‡Ù… Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ ÙˆÙ…Ù†Ù‡Ø¬ÙŠØ© ØªØ¯Ø¨Ø± Ø§Ù„Ù†Øµ Ø§Ù„Ø¥Ù„Ù‡ÙŠ",
                    "en": "A new approach to understanding the text and manuscript of the Quran"
                },
                "cover_image": "books/the-jurisprudence/ar/cover-ar.png",
                "links": {
                    "ar": {
                        "text": "books/the-jurisprudence/ar/content.txt",
                        "cover": "books/the-jurisprudence/ar/cover-ar.png"
                    },
                    "en": {
                        "text": "books/the-jurisprudence/en/content.txt",
                        "cover": "books/the-jurisprudence/en/cover-en.png"
                    }
                },
                "metadata": {
                    "author": "Ù†Ø§ØµØ± Ø§Ø¨Ù† Ø¯Ø§ÙˆÙˆØ¯",
                    "category": "quranic_studies",
                    "pages_ar": 592,
                    "pages_en": 416,
                    "language_ar": "arabic",
                    "language_en": "english",
                    "ai_accessible": true,
                    "structured_data": true,
                    "topics": ["ÙÙ‚Ù‡ Ø§Ù„Ù„Ø³Ø§Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ", "ÙÙ‡Ù… Ø§Ù„Ù†Øµ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ", "Ø§Ù„Ù…Ø®Ø·ÙˆØ·Ø§Øª Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©", "Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠØ©", "Ø§Ù„ØªØ¯Ø¨Ø±"],
                    "topics_en": ["Quranic Linguistics", "Understanding the Quranic Text", "Quranic Manuscripts", "Quranic Scripts", "Contemplation"]
                }
            }
        ];

        // Ø°Ø§ÙƒØ±Ø© ØªØ®Ø²ÙŠÙ† Ù…Ø¤Ù‚Øª Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØªØ¨
        const bookContentCache = new Map();

        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨Ø­Ø«
        let currentSearchLanguage = 'both'; // 'both', 'ar', 'en'
        let currentDisplayLanguage = 'ar'; // 'ar', 'en'

        // === Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ===

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function initializeTabs() {
            const tabs = document.querySelectorAll('.search-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    const targetSection = document.getElementById(tabId);
                    if (targetSection) {
                        targetSection.classList.add('active');
                    }
                });
            });
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ©
        function initializeLanguageButtons() {
            // Ø£Ø²Ø±Ø§Ø± Ù„ØºØ© Ø§Ù„Ø¨Ø­Ø«
            const langButtons = document.querySelectorAll('.lang-btn[data-lang]');
            langButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    langButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentSearchLanguage = this.getAttribute('data-lang');
                });
            });

            // Ø£Ø²Ø±Ø§Ø± Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¶
            const displayButtons = document.querySelectorAll('.lang-btn[data-lang-display]');
            displayButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    displayButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentDisplayLanguage = this.getAttribute('data-lang-display');
                    displayAllBooks();
                });
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù†Øµ Ù…Ø¹ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø³Ø·ÙˆØ±
        function searchInText(content, query, maxLines = 5) {
            if (!content) return [];
            
            const lines = content.split('\n');
            const matchingLines = [];
            const queryLower = query.toLowerCase();
            
            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();
                if (line.toLowerCase().includes(queryLower)) {
                    // Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ù‚ Ø§Ù„Ø³Ø·ÙˆØ±
                    const start = Math.max(0, i - 1);
                    const end = Math.min(lines.length, i + 2);
                    const context = lines.slice(start, end).map((l, idx) => ({
                        text: l.trim(),
                        isMatch: (start + idx) === i,
                        lineNumber: start + idx + 1
                    }));
                    
                    matchingLines.push({
                        lineNumber: i + 1,
                        text: line,
                        context: context
                    });
                    
                    if (matchingLines.length >= maxLines) break;
                }
            }
            
            return matchingLines;
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ù„ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØªÙŠÙ†
        async function performLocalSearch() {
            console.log('ğŸ” ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…Ø­Ù„ÙŠ...');
            const query = document.getElementById('localSearch').value.trim();
            const resultsDiv = document.getElementById('localResults');
            
            if (!query) {
                resultsDiv.innerHTML = '<p style="color: #666; text-align: center; padding: 2rem;">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØµØ·Ù„Ø­ Ù„Ù„Ø¨Ø­Ø«</p>';
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„
            resultsDiv.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div style="display: inline-block; padding: 10px 20px; background: #e8f4fd; border-radius: 10px;">
                        <p>ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù†ØµÙˆØµ Ø§Ù„ÙƒØªØ¨...</p>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #666;">
                            <div class="loading-dots">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            const searchResults = [];
            
            // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ÙƒÙ„ ÙƒØªØ§Ø¨
            for (const book of booksData) {
                console.log(`ğŸ” Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ÙƒØªØ§Ø¨: ${book.titles.ar}`);
                
                // Ø§Ù„Ø¨Ø­Ø« Ø­Ø³Ø¨ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©
                let inTitle = false;
                let inDescription = false;
                let inTopics = false;
                let inEnglishTopics = false;

                if (currentSearchLanguage === 'both' || currentSearchLanguage === 'ar') {
                    inTitle = inTitle || book.titles.ar.toLowerCase().includes(query.toLowerCase());
                    inDescription = inDescription || book.description.ar.toLowerCase().includes(query.toLowerCase());
                    inTopics = inTopics || book.metadata.topics.some(topic => 
                        topic.toLowerCase().includes(query.toLowerCase())
                    );
                }

                if (currentSearchLanguage === 'both' || currentSearchLanguage === 'en') {
                    inTitle = inTitle || book.titles.en.toLowerCase().includes(query.toLowerCase());
                    inDescription = inDescription || book.description.en.toLowerCase().includes(query.toLowerCase());
                    inEnglishTopics = inEnglishTopics || (book.metadata.topics_en && book.metadata.topics_en.some(topic => 
                        topic.toLowerCase().includes(query.toLowerCase())
                    ));
                }

                const inAnyTopics = inTopics || inEnglishTopics;
                
                let textMatches = [];
                
                // ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Øµ ÙˆØ§Ù„Ø¨Ø­Ø« ÙÙŠÙ‡ (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
                if (currentSearchLanguage === 'both' || currentSearchLanguage === 'ar') {
                    const arabicTextUrl = book.links.ar.text;
                    if (arabicTextUrl) {
                        const content = await loadBookContent(book.id + '_ar', arabicTextUrl);
                        if (content) {
                            const matches = searchInText(content, query, 3);
                            textMatches = textMatches.concat(matches);
                        }
                    }
                }
                
                // ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Øµ ÙˆØ§Ù„Ø¨Ø­Ø« ÙÙŠÙ‡ (Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©)
                if (currentSearchLanguage === 'both' || currentSearchLanguage === 'en') {
                    const englishTextUrl = book.links.en.text;
                    if (englishTextUrl) {
                        const content = await loadBookContent(book.id + '_en', englishTextUrl);
                        if (content) {
                            const matches = searchInText(content, query, 3);
                            textMatches = textMatches.concat(matches);
                        }
                    }
                }
                
                if (inTitle || inDescription || inAnyTopics || textMatches.length > 0) {
                    searchResults.push({
                        book: book,
                        inTitle: inTitle,
                        inDescription: inDescription,
                        inTopics: inAnyTopics,
                        inArabicTopics: inTopics,
                        inEnglishTopics: inEnglishTopics,
                        textMatches: textMatches,
                        score: (inTitle ? 3 : 0) + (inDescription ? 2 : 0) + (inAnyTopics ? 1 : 0) + (textMatches.length > 0 ? 2 : 0)
                    });
                }
            }
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø­Ø³Ø¨ Ø§Ù„Ø£Ù‡Ù…ÙŠØ©
            searchResults.sort((a, b) => b.score - a.score);
            
            if (searchResults.length === 0) {
                resultsDiv.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #666;">
                        <p>âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬ Ù„Ù€ "<strong>${query}</strong>"</p>
                        <p>Ø¬Ø±Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ØµØ·Ù„Ø­Ø§Øª Ø¨Ø­Ø« Ù…Ø®ØªÙ„ÙØ© Ø£Ùˆ ØªØºÙŠÙŠØ± Ù„ØºØ© Ø§Ù„Ø¨Ø­Ø«</p>
                    </div>
                `;
                return;
            }
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            resultsDiv.innerHTML = `
                <h3 style="margin-bottom: 1rem; color: var(--primary-color);">
                    Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù„Ù€ "<span style="color: var(--accent-color);">${query}</span>" (${searchResults.length})
                    <span style="font-size: 0.8em; color: #666;">- Ø§Ù„Ø¨Ø­Ø« ÙÙŠ: ${getLanguageText(currentSearchLanguage)}</span>
                </h3>
                ${searchResults.map(result => {
                    const book = result.book;
                    const displayLang = currentDisplayLanguage;
                    
                    return `
                        <div class="book-card">
                            <h4 class="book-title">
                                ${displayLang === 'ar' ? book.titles.ar : book.titles.en}
                                ${result.inTitle ? '<span class="language-badge">Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</span>' : ''}
                            </h4>
                            <p class="book-description">
                                ${displayLang === 'ar' ? book.description.ar : book.description.en}
                                ${result.inDescription ? '<span class="language-badge">Ø§Ù„ÙˆØµÙ</span>' : ''}
                            </p>
                            <div class="book-meta">
                                <strong>Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> ${book.metadata.category} â€¢ 
                                <strong>Ø§Ù„ØµÙØ­Ø§Øª:</strong> ${displayLang === 'ar' ? book.metadata.pages_ar : book.metadata.pages_en}
                            </div>
                            
                            <!-- Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© -->
                            <div class="topics-list">
                                ${book.metadata.topics.slice(0, 5).map(topic => `
                                    <span class="topic-tag">${topic}</span>
                                `).join('')}
                                ${book.metadata.topics_en && book.metadata.topics_en.slice(0, 3).map(topic => `
                                    <span class="topic-tag" style="background: #fff0f0; border-color: #ffcccc;">${topic}</span>
                                `).join('')}
                            </div>
                            
                            ${result.inArabicTopics || result.inEnglishTopics ? `
                                <div style="margin-top: 0.5rem; padding: 0.5rem; background: #f0f8ff; border-radius: 5px; font-size: 0.9em;">
                                    <strong>Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©:</strong> 
                                    ${result.inArabicTopics ? '<span style="color: #1a5276;">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>' : ''}
                                    ${result.inArabicTopics && result.inEnglishTopics ? ' Ùˆ ' : ''}
                                    ${result.inEnglishTopics ? '<span style="color: #e74c3c;">Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</span>' : ''}
                                </div>
                            ` : ''}
                            
                            ${result.textMatches.length > 0 ? `
                                <div style="margin-top: 1.5rem;">
                                    <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">
                                        ğŸ“– Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ Ø§Ù„ØªÙŠ ÙˆØ±Ø¯Øª ÙÙŠÙ‡Ø§ Ø§Ù„ÙƒÙ„Ù…Ø©:
                                    </h5>
                                    ${result.textMatches.map(match => `
                                        <div class="match-line">
                                            <div class="line-number">
                                                Ø§Ù„Ø³Ø·Ø± ${match.lineNumber}
                                            </div>
                                            <div style="line-height: 1.6;">
                                                ${match.context.map(ctx => `
                                                    <div class="context-line ${ctx.isMatch ? 'match' : ''}">
                                                        ${ctx.isMatch ? 'â†’ ' : ''}${highlightText(ctx.text, query)}
                                                    </div>
                                                `).join('')}
                                            </div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : ''}
                            
                            <div style="margin-top: 1rem; display: flex; gap: 10px; flex-wrap: wrap;">
                                <a href="books/${book.id}/ar/" target="_blank" class="book-link">
                                    ğŸ“š Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ§Ø¨ (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
                                </a>
                                <a href="books/${book.id}/en/" target="_blank" class="book-link" style="background: #e74c3c;">
                                    ğŸ“˜ Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ§Ø¨ (English)
                                </a>
                            </div>
                        </div>
                    `;
                }).join('')}
            `;
            
            console.log(`âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${searchResults.length} Ù†ØªÙŠØ¬Ø©`);
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„Ù„ØºØ©
        function getLanguageText(lang) {
            switch(lang) {
                case 'both': return 'Ø§Ù„Ù„ØºØªØ§Ù† Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©';
                case 'ar': return 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙ‚Ø·';
                case 'en': return 'Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙÙ‚Ø·';
                default: return 'Ø§Ù„Ù„ØºØªØ§Ù†';
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØªØ§Ø¨
        async function loadBookContent(bookId, textUrl) {
            if (bookContentCache.has(bookId)) {
                return bookContentCache.get(bookId);
            }

            try {
                console.log(`ğŸ“¥ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØªØ§Ø¨: ${bookId}`);
                const response = await fetch(textUrl);
                
                if (!response.ok) {
                    throw new Error(`ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ${response.status}`);
                }
                
                const content = await response.text();
                bookContentCache.set(bookId, content);
                console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØªØ§Ø¨: ${bookId}`);
                return content;
                
            } catch (error) {
                console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙƒØªØ§Ø¨ ${bookId}:`, error);
                return null;
            }
        }

        // ØªØ¸Ù„ÙŠÙ„ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚
        function highlightText(text, query) {
            const regex = new RegExp(`(${escapeRegex(query)})`, 'gi');
            return text.replace(regex, '<mark class="search-highlight">$1</mark>');
        }

        // ØªÙ‡Ø±ÙŠØ¨ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø®Ø§ØµØ© ÙÙŠ regex
        function escapeRegex(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØªÙŠÙ†
        function displayAllBooks() {
            console.log('ğŸ“š Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨...');
            const booksList = document.getElementById('allBooksList');
            const displayLang = currentDisplayLanguage;
            
            booksList.innerHTML = `
                <h3 style="margin-bottom: 1.5rem; color: var(--primary-color);">
                    Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…ØªØ§Ø­Ø© (${booksData.length})
                    <span style="font-size: 0.8em; color: #666;">- Ø§Ù„Ø¹Ø±Ø¶ Ø¨Ø§Ù„Ù„ØºØ©: ${displayLang === 'ar' ? 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' : 'Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©'}</span>
                </h3>
                ${booksData.map(book => `
                    <div class="book-card">
                        <h4 class="book-title">${displayLang === 'ar' ? book.titles.ar : book.titles.en}</h4>
                        <p class="book-description">${displayLang === 'ar' ? book.description.ar : book.description.en}</p>
                        <div class="book-meta">
                            <strong>Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> ${book.metadata.category} â€¢ 
                            <strong>Ø§Ù„ØµÙØ­Ø§Øª:</strong> ${displayLang === 'ar' ? book.metadata.pages_ar : book.metadata.pages_en} â€¢
                            <strong>Ø§Ù„Ù„ØºØ©:</strong> ${displayLang === 'ar' ? 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' : 'Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©'}
                        </div>
                        
                        <!-- Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© -->
                        <div style="margin: 10px 0;">
                            <strong>Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©:</strong>
                            <div class="topics-list">
                                ${(displayLang === 'ar' ? book.metadata.topics : (book.metadata.topics_en || book.metadata.topics))
                                    .slice(0, 8).map(topic => `
                                    <span class="topic-tag">${topic}</span>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; margin-top: 1rem; flex-wrap: wrap;">
                            <a href="books/${book.id}/ar/" target="_blank" class="book-link">
                                ğŸ“š Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ§Ø¨ (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)
                            </a>
                            <a href="books/${book.id}/en/" target="_blank" class="book-link" style="background: #e74c3c;">
                                ğŸ“˜ Ø¹Ø±Ø¶ Ø§Ù„ÙƒØªØ§Ø¨ (English)
                            </a>
                        </div>
                    </div>
                `).join('')}
            `;
            
            console.log('âœ… ØªÙ… Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨');
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‚ÙŠÙ‚ ÙÙŠ Ø¬ÙˆØ¬Ù„
        function performExactSearch() {
            console.log('ğŸ¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø¯Ù‚ÙŠÙ‚...');
            const query = document.getElementById('exactQuery').value.trim();
            if (!query) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø¨Ø­Ø«');
                return;
            }
            
            const exactQuery = `"${query}"`;
            const searchInput = document.querySelector('.gsc-input input');
            
            if (searchInput) {
                searchInput.value = exactQuery;
                const searchButton = document.querySelector('.gsc-search-button');
                if (searchButton) {
                    searchButton.click();
                    console.log('âœ… ØªÙ… ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø¬ÙˆØ¬Ù„');
                }
            } else {
                alert('Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¬ÙˆØ¬Ù„ ØºÙŠØ± Ø¬Ø§Ù‡Ø² Ø¨Ø¹Ø¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨Ø¹Ø¯ Ø«ÙˆØ§Ù†Ù.');
            }
        }

        // === ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø© ===
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©...');
            
            // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
            initializeTabs();
            
            // ØªÙ‡ÙŠØ¦Ø© Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„ØºØ©
            initializeLanguageButtons();
            
            // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            displayAllBooks();
            
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
            document.getElementById('exactQuery')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performExactSearch();
            });
            
            document.getElementById('localSearch')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performLocalSearch();
            });
            
            // Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
            window.performLocalSearch = performLocalSearch;
            window.performExactSearch = performExactSearch;
            window.displayAllBooks = displayAllBooks;
            
            console.log('âœ… Ø§Ù„ØµÙØ­Ø© Ø¬Ø§Ù‡Ø²Ø©!');
            console.log('ğŸ“– Ø¹Ø¯Ø¯ Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:', booksData.length);
        });

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ø®Ø·Ø§Ø¡ JavaScript
        window.addEventListener('error', function(e) {
            console.error('âŒ Ø®Ø·Ø£ ÙÙŠ JavaScript:', e.error);
        });
    </script>
</body>
</html>